/* ============================================================
   assets/style.css
   EPTEC STYLE â€” FINAL (FULL REWRITE, Security/UX Hardened)
   - Full-scene UI (fixed scenes)
   - Footer ALWAYS visible/clickable
   - Globe pinned top-right (RTL safe)
   - Modals stable
   - Whiteout/tunnel never block clicks
   - No layout jumps
   ============================================================ */

:root{
  --gold: #d4af37;
  --gold-glow: rgba(212, 175, 55, 0.4);

  --ui-black: #000;
  --ui-white: #fff;

  --msg-bg: rgba(255,255,255,0.92);
  --toast-bg: rgba(255,255,255,0.92);

  --footer-h: 56px;

  --z-footer: 1000000;
  --z-globe:  999999;
  --z-modal:  999900;
  --z-whiteout: 999999;
}

/* ----------------------------
   Global baseline
---------------------------- */
*{ box-sizing:border-box; }

html, body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden; /* Full-scene UI: no document scroll */
  font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
  background: var(--ui-black);
}

/* helpers used across files */
.hidden{ display:none !important; }
.modal-hidden{ display:none !important; }

/* ----------------------------
   Full-scene baseline
---------------------------- */
.scene{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  padding-bottom: var(--footer-h); /* reserve footer space */
}

/* ----------------------------
   Meadow layout (visuals in imagine.css)
---------------------------- */
#meadow-view{
  display:flex;
  justify-content:center;
  align-items:center;
}

/* ----------------------------
   Entry UI (login box)
---------------------------- */
.login-box{
  position: relative;
  width: min(520px, 92vw);
  padding: 18px;
  border-radius: 18px;
  background: rgba(255,255,255,0.14);
  border: 1px solid rgba(255,255,255,0.22);
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 50px rgba(0,0,0,0.35);

  display:flex;
  flex-direction:column;
  gap:12px;
}

.pw-wrap{ position:relative; }

.login-box input{
  width:100%;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.45);
  background: rgba(255,255,255,0.92);
  color:#111;
  padding: 10px 14px;
  font-size:16px;
  outline:none;
}

.login-box input:focus{
  border-color: rgba(0,0,0,0.65);
}

.login-box button{
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.55);
  background: rgba(255,255,255,0.92);
  color:#111;
  padding: 10px 16px;
  font-size:16px;
  cursor:pointer;
  min-height:44px;
}

.login-box button:hover{ filter: brightness(1.03); }

.login-box button.locked,
.login-box button:disabled{
  opacity:0.55;
  cursor:not-allowed;
}

/* ----------------------------
   System message
---------------------------- */
#login-message{ display:none; }
#login-message.show{ display:block; }

.system-msg{
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.20);
  background: var(--msg-bg);
  color:#111;
  font-size:14px;
  line-height:1.3;
  padding:10px 12px;
}

/* ----------------------------
   Language switcher (globe pinned, RTL safe)
---------------------------- */
html[dir="rtl"] #language-switcher,
html[dir="ltr"] #language-switcher,
#language-switcher{
  position: fixed !important;
  top: 14px !important;
  right: 14px !important;
  left: auto !important;
  bottom: auto !important;

  transform: none !important;
  margin: 0 !important;

  direction: ltr !important;
  unicode-bidi: isolate !important;

  z-index: var(--z-globe) !important;
}

#lang-toggle{
  width:46px;
  height:46px;
  border-radius:14px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(0,0,0,.20);
  color: #fff;
  backdrop-filter: blur(10px);
  cursor:pointer;
  display:grid;
  place-items:center;
  font-size:18px;
  line-height:1;
}

#language-switcher #lang-rail{
  position:absolute;
  top:56px;
  right:0;
  left:auto;

  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:8px;

  transform-origin: top right;
  transform: scaleY(0);
  opacity:0;
  pointer-events:none;

  transition: transform 220ms ease, opacity 220ms ease;
}

#language-switcher.lang-open #lang-rail{
  transform: scaleY(1);
  opacity:1;
  pointer-events:auto;
}

.lang-item{
  width:46px;
  height:46px;
  border-radius:14px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(0,0,0,.20);
  backdrop-filter: blur(10px);
  cursor:pointer;

  display:grid;
  place-items:center;

  font-size:16px;
  line-height:1;
  color:#fff;
}

/* Clock */
#system-clock{
  margin-top: 6px;
  font-size: 13px;
  opacity: 0.9;
  color: #000;
}

/* ----------------------------
   Tunnel / transitions (controller toggles classes)
---------------------------- */
.tunnel-hidden{ display:none; }
.tunnel-active{ display:block; }

/* Whiteout overlay MUST never block clicks */
.whiteout-hidden{ display:none !important; }
#eptec-white-flash{
  position: fixed;
  inset: 0;
  background: #fff;
  opacity: 0;
  z-index: var(--z-whiteout);
  pointer-events: none; /* critical */
}

.white-flash-active{
  display:block !important;
  opacity:1;
  transition: opacity 120ms linear;
}

/* ----------------------------
   Doors / rooms baseline
---------------------------- */
#doors-view{
  display:none;
  padding:24px;
  justify-content:center;
  align-items:center;
}

.doors-wrapper{
  width: min(980px, 96vw);
  display:flex;
  gap:18px;
  justify-content:center;
  align-items:stretch;
  flex-wrap:wrap;
}

.door-block{
  width: min(440px, 96vw);
  padding: 18px;
  border-radius: 18px;
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.22);
  backdrop-filter: blur(12px);
  color: #fff;
}

#room-1-view, #room-2-view{
  display:none;
  padding:24px;
  color:#fff;
}

/* ----------------------------
   Modals (stable)
---------------------------- */
.modal{
  position: fixed;
  inset: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  background: rgba(0,0,0,0.72);
  z-index: var(--z-modal);
}

/* ----------------------------
   Footer ALWAYS visible/clickable
---------------------------- */
footer, #eptec-footer{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--footer-h);

  display:flex;
  align-items:center;
  gap:14px;
  padding: 10px 14px;

  background: rgba(255,255,255,0.92);
  border-top: 1px solid rgba(0,0,0,0.15);
  backdrop-filter: blur(10px);

  z-index: var(--z-footer);
  pointer-events: auto;
}

footer a, #eptec-footer a{
  pointer-events:auto;
  cursor:pointer;
  color:#111;
  text-decoration:none;
  font-size:14px;
}

footer a:hover{ text-decoration: underline; }

/* ----------------------------
   Optional visuals (your original)
---------------------------- */
.portal-door{
  width:220px;
  height:350px;
  background: rgba(255,255,255,0.10);
  border: 4px solid var(--gold);
  border-radius: 110px 110px 20px 20px;
  backdrop-filter: blur(15px);
  box-shadow: 0 0 50px var(--gold-glow), inset 0 0 20px var(--gold-glow);
  cursor:pointer;
  transition: transform 180ms ease, box-shadow 180ms ease;
}

.portal-door:hover{
  transform: translateY(-10px) scale(1.05);
  box-shadow: 0 0 80px var(--gold), inset 0 0 20px var(--gold-glow);
}

.ampel-standalone{
  background:#111;
  padding:30px;
  border-radius:60px;
  border: 4px solid #333;
  box-shadow: 0 0 50px rgba(0,0,0,1);
  display:flex;
  flex-direction:column;
  gap:20px;
  justify-self:center;
  align-self:center;
}

.ampel-bulb{
  width:70px;
  height:70px;
  border-radius:50%;
  background:#222;
  border: 4px solid #000;
  cursor:pointer;
  opacity:0.2;
  transition: opacity 140ms ease, filter 140ms ease, background 140ms ease, box-shadow 140ms ease;
}

.ampel-bulb.active{
  opacity:1;
  filter: brightness(1.5);
}

#bulb-1.active, #bulb-2.active, #bulb-3.active{
  background:#ffcc00;
  box-shadow: 0 0 40px #ffcc00;
}
#bulb-4.active{
  background:#ff6600;
  box-shadow: 0 0 40px #ff6600;
}
#bulb-5.active{
  background:#ff0000;
  box-shadow: 0 0 40px #ff0000;
}
