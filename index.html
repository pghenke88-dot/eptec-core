<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPTEC CORE - Methode Henke 2026</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="ui-elements.css">
    
    <style>
        /* Lokale ErgÃ¤nzungen fÃ¼r die Portal-AtmosphÃ¤re */
        :root {
            --gold: #d4af37;
            --dark-oak: #2c1e14;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Georgia', serif; background: #000; color: white; overflow: hidden; }

        /* LOADING SCREEN */
        #loader {
            position: fixed; inset: 0; background: black; z-index: 5000;
            display: flex; align-items: center; justify-content: center;
        }
        .spinning-lock { font-size: 50px; animation: rotate 3s infinite linear; color: var(--gold); }
        @keyframes rotate { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }

        /* WIESE (MEADOW) */
        .meadow {
            height: 100vh; background: radial-gradient(circle at center, #2e5d32, #0d2b1a);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: filter 2s ease;
        }

        .tunnel-active { filter: blur(50px) brightness(1.5) scale(2); }

        /* PORTAL & BUTTONS */
        .door-frame {
            border: 2px solid var(--gold); padding: 20px; border-radius: 15px;
            background: var(--glass); backdrop-filter: blur(5px);
            transition: all 0.5s; cursor: pointer; text-align: center; min-width: 150px;
        }
        .door-frame:hover { box-shadow: 0 0 30px var(--gold); transform: translateY(-10px); }

        /* HILFSKLASSE FÃœR LOGIC */
        .hidden { display: none !important; }
    </style>
</head>
<body onload="initApp()">

    <div id="loader">
        <div class="spinning-lock">ðŸ”’</div>
    </div>

    <section id="meadow-view" class="meadow">
        <div class="sun-beams"></div>
        <div class="profile-calendar" onclick="alert('Session 2026 aktiv')">17</div>
        <h1 style="color: var(--gold); text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);">EPTEC PORTAL</h1>
        <div style="display: flex; gap: 40px;">
            <div class="door-frame" onclick="enterRoom('room-1-view')">âš’ WERKSTATT</div>
            <div class="door-frame" onclick="enterRoom('room-2-view')">ðŸ›¡ SITZUNGSSAAL</div>
        </div>
    </section>

    <section id="room-1-view" class="room-view workshop-ambient hidden">
        <div class="wooden-desk">
            <h2 id="framework-title" style="color: var(--gold); font-family: 'Courier New', monospace;">FRAMEWORK ANALYSE</h2>
            <div class="engraved-matrix">
                <p>Initialisiere Matrix...</p>
            </div>
        </div>
        <button class="btn-exit" onclick="exitToMeadow()">ZurÃ¼ck zur Wiese</button>
    </section>

    <section id="room-2-view" class="room-view control-ambient hidden">
        <div class="admin-orb" id="admin-kugel"></div>
        
        <div class="service-cart">
            <h3 style="color:var(--dark-oak)">DOKUMENTE</h3>
            <button onclick="EPTEC_BRAIN.switchFramework('betrieb')">Betrieb</button>
            <button onclick="EPTEC_BRAIN.switchFramework('agentur')">Agentur</button>
        </div>

        <div class="center-stage" style="text-align: center;">
            <div class="traffic-light-container">
                <div class="traffic-light">
                    <div id="bulb-1" class="light yellow" onclick="EPTEC_BRAIN.Control.setAmpel(1)"></div>
                    <div id="bulb-3" class="light yellow" onclick="EPTEC_BRAIN.Control.setAmpel(3)"></div>
                    <div id="bulb-5" class="light red" onclick="EPTEC_BRAIN.Control.setAmpel(5)"></div>
                </div>
            </div>
            <div id="spiegel-nachricht">
                <i>Der Spiegel der Wahrheit erwartet Ihre Eingabe...</i>
            </div>
        </div>

        <div class="corner-plant">
            ðŸŒ¿
            <div class="hidden-archive" onclick="EPTEC_BRAIN.Compliance.exportAnnexK()">ANNEX K EXPORT</div>
        </div>
        <button class="btn-exit" onclick="exitToMeadow()">ZurÃ¼ck zur Wiese</button>
    </section>

    <script type="application/json" id="multi-lang-assets">
    {
      "languages": {
        "de": { "agb_btn": "Haftungsausschluss", "status_msg": "SYSTEM BEREIT" },
        "en": { "agb_btn": "Legal Terms", "status_msg": "SYSTEM READY" }
      },
      "kisten": {
        "betrieb": {
          "name": "Framework Betrieb",
          "languages": ["de", "en"],
          "structure": ["PrÃ¤ambel", "Part 0", "Part I", "Part II", "Part III", "Annex A", "Annex B", "Annex C"]
        },
        "agentur": {
          "name": "Agency Framework",
          "languages": ["en"],
          "structure": ["Part I", "Part II", "Annex J", "Annex K", "Annex L", "Annex M"]
        }
      }
    }
    </script>

    <script src="logic.js"></script>
    <script>
        function initApp() {
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
            }, 2000);
        }

        function enterRoom(roomID) {
            const meadow = document.getElementById('meadow-view');
            meadow.classList.add('tunnel-active');
            
            setTimeout(() => {
                meadow.classList.add('hidden');
                meadow.classList.remove('tunnel-active');
                
                const target = document.getElementById(roomID);
                target.classList.remove('hidden');
                
                // Triggere die Matrix-Logik in Logic.js
                if(roomID === 'room-1-view') {
                    EPTEC_BRAIN.Workshop.render();
                }
            }, 1000);
        }

        function exitToMeadow() {
            document.querySelectorAll('.room-view').forEach(r => r.classList.add('hidden'));
            document.getElementById('meadow-view').classList.remove('hidden');
        }
    </script>
</body>
</html>
