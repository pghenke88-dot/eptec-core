<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EPTEC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Referrer -->
  <meta name="referrer" content="no-referrer" />

  <!-- Favicon -->
  <link rel="icon" href="./favicon.ico" />

  <!-- =========================================================
       SECURITY ‚Äî SINGLE CSP (GitHub Pages safe)
       NOTE: inline <script> is blocked (script-src 'self')
       ========================================================= -->
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self';
          base-uri 'self';
          object-src 'none';
          frame-ancestors 'none';
          form-action 'self';
          upgrade-insecure-requests;
          img-src 'self' data:;
          media-src 'self' data:;
          style-src 'self' 'unsafe-inline';
          script-src 'self';
          connect-src 'self';
        ">

  <!-- =========================================================
       STYLES
       ========================================================= -->
  <link rel="stylesheet" href="./assets/style.css" />
  <link rel="stylesheet" href="./assets/ui_elements.css" />
  <link rel="stylesheet" href="./assets/hidden.css" />
  <link rel="stylesheet" href="./assets/imagine.css" />

  <!-- =========================================================
       SCRIPTS ‚Äî CANONICAL ORDER (CSP-safe, boot-correct)
       ========================================================= -->

  <!-- 1) FOUNDATION -->
  <script src="./scripts/ui_state.js" defer></script>

  <!-- 2) BACKEND (Phase 1) -->
  <script src="./scripts/mock_backend.js" defer></script>

  <!-- 3) STATE ADAPTER -->
  <script src="./scripts/state_manager.js" defer></script>

  <!-- 4) KERNEL / LOGIC -->
  <script src="./scripts/logic.js" defer></script>

  <!-- 5) CLICKMASTER DVO -->
  <script src="./scripts/eptec_clickmaster_dvo.js" defer></script>

  <!-- 6) EFFECTS -->
  <script src="./scripts/sounds.js" defer></script>

  <!-- 7) UI-CONTROL (DVO-only mediator) -->
  <script src="./scripts/ui_controller.js" defer></script>

  <!-- 8) ASSISTANTS -->
  <script src="./scripts/registration_engine.js" defer></script>
  <script src="./scripts/transparency_ui.js" defer></script>
  <script src="./scripts/room1_framework_assistant.js" defer></script>

  <!-- 9) API / MAIN -->
  <script src="./scripts/api_client.js" defer></script>
  <script src="./scripts/main.js" defer></script>

  <!-- 10) DEMO (AFTER main) -->
  <script src="./scripts/eptec_demo_allinone.js" defer></script>
</head>

<body>

<!-- =========================================================
     START / MEADOW
     ========================================================= -->
<section id="meadow-view" class="scene grassy-meadow" data-logic-id="scene.meadow">

  <div class="sun"></div>
  <div class="stream"></div>

  <h1 id="eptec-title">Contract Office</h1>
  <h2 id="eptec-subtitle">by Johannes B√ºngener</h2>

  <div id="system-clock" data-logic-id="system-clock"></div>

  <div class="login-box">

    <input id="login-username" type="text" data-logic-id="login-username" placeholder="Username" />

    <div class="pw-wrap">
      <input id="login-password" type="password" autocomplete="off"
             data-logic-id="login-password" placeholder="Password" />
    </div>

    <button id="btn-login" type="button" data-logic-id="btn-login">Login</button>
    <div id="login-message" class="system-msg" data-logic-id="login-message"></div>

    <button id="btn-register" type="button" data-logic-id="btn-register">Register</button>
    <button id="btn-forgot" type="button" data-logic-id="btn-forgot">Forgot password</button>

    <button id="btn-demo" type="button" data-logic-id="btn-demo">Demo</button>

    <div class="pw-wrap">
      <input id="admin-code" type="password" autocomplete="off"
             data-logic-id="admin-code" placeholder="Master password" />
    </div>

    <button id="admin-submit" type="button" data-logic-id="admin-submit">Enter</button>

    <!-- =========================================================
         CAPTURE MODE (Admin option, explicit choice)
         - OFF / WEBCAM / SCREEN (no auto-start)
         - keeps existing checkbox id removed, so no phantom wiring
         ========================================================= -->
    <div class="admin-camera-row" style="display:block; margin-top:10px;"
         data-logic-id="admin.capture.options">
      <strong>Capture Mode (Admin):</strong><br />

      <label>
        <input type="radio" name="capture-mode" value="off"
               checked data-logic-id="capture.off" />
        No capture
      </label><br />

      <label>
        <input type="radio" name="capture-mode" value="webcam"
               data-logic-id="capture.webcam" />
        Webcam
      </label><br />

      <label>
        <input type="radio" name="capture-mode" value="screen"
               data-logic-id="capture.screen" />
        Screen capture
      </label>
    </div>

  </div>

  <!-- LANGUAGE SWITCH -->
  <div id="language-switcher" data-logic-id="language-switcher">
    <button id="lang-toggle" type="button" data-logic-id="lang-toggle">üåç</button>
    <div id="lang-rail" data-logic-id="lang-rail">
      <button type="button" class="lang-item" data-lang="en">EN</button>
      <button type="button" class="lang-item" data-lang="de">DE</button>
      <button type="button" class="lang-item" data-lang="es">ES</button>
      <button type="button" class="lang-item" data-lang="fr">FR</button>
      <button type="button" class="lang-item" data-lang="it">IT</button>
      <button type="button" class="lang-item" data-lang="pt">PT</button>
      <button type="button" class="lang-item" data-lang="nl">NL</button>
      <button type="button" class="lang-item" data-lang="ru">RU</button>
      <button type="button" class="lang-item" data-lang="uk">UK</button>
      <button type="button" class="lang-item" data-lang="ar">AR</button>
      <button type="button" class="lang-item" data-lang="cn">CN</button>
      <button type="button" class="lang-item" data-lang="jp">JP</button>
    </div>
  </div>

</section>

<!-- =========================================================
     TUNNEL
     ========================================================= -->
<section id="tunnel-view" class="scene tunnel-hidden" data-logic-id="scene.tunnel">
  <div class="tunnel-wall"></div>

  <div style="position:absolute; bottom:16px; width:100%; text-align:center;">
    <button id="btn-logout-tunnel" type="button" data-logic-id="btn-logout-tunnel">Logout</button>
  </div>
</section>

<div id="eptec-white-flash" class="whiteout-hidden"></div>

<!-- =========================================================
     DOORS
     ========================================================= -->
<section id="doors-view" class="scene modal-hidden" data-logic-id="scene.doors">
  <div class="doors-wrapper">

    <div class="door-block" id="door-construction" data-logic-id="doors.block.door1">
      <h2 data-logic-id="doors.title.door1">Construction</h2>

      <input id="door1-present" type="text" placeholder="Action code" />
      <button id="door1-present-apply" type="button">Apply</button>

      <input id="door1-vip" type="text" placeholder="VIP code" />
      <button id="door1-vip-apply" type="button">Apply</button>

      <div class="pw-wrap">
        <input id="door1-master" type="password" autocomplete="off" placeholder="Master password" />
      </div>
      <button id="door1-master-apply" type="button">Enter</button>

      <button id="door1-enter" type="button" data-logic-id="doors.door1" style="margin-top:10px;">Open Door</button>
    </div>

    <div class="door-block" id="door-controlling" data-logic-id="doors.block.door2">
      <h2 data-logic-id="doors.title.door2">Contract Controlling</h2>

      <input id="door2-present" type="text" placeholder="Action code" />
      <button id="door2-present-apply" type="button">Apply</button>

      <input id="door2-vip" type="text" placeholder="VIP code" />
      <button id="door2-vip-apply" type="button">Apply</button>

      <div class="pw-wrap">
        <input id="door2-master" type="password" autocomplete="off" placeholder="Master password" />
      </div>
      <button id="door2-master-apply" type="button">Enter</button>

      <button id="door2-enter" type="button" data-logic-id="doors.door2" style="margin-top:10px;">Open Door</button>
    </div>

    <div style="width:100%; margin-top:16px; text-align:center;">
      <button id="btn-logout-doors" type="button" data-logic-id="btn-logout-doors">Logout</button>
    </div>

  </div>
</section>

<!-- =========================================================
     ROOM 1
     ========================================================= -->
<section id="room-1-view" class="scene modal-hidden" data-logic-id="scene.room1">
  <div class="room room1">

    <h2>Room 1</h2>

    <button type="button" data-logic-id="r1.savepoint">Savepoint</button>
    <button type="button" data-logic-id="r1.table.download">Download Text</button>
    <button type="button" data-logic-id="r1.mirror.download">Download Snippets</button>
    <button type="button" data-logic-id="r1.traffic.enable">Traffic Light</button>

    <button id="btn-logout-room1" type="button" data-logic-id="btn-logout-room1">Logout</button>
  </div>
</section>

<!-- =========================================================
     ROOM 2
     ========================================================= -->
<section id="room-2-view" class="scene modal-hidden" data-logic-id="scene.room2">
  <div class="room room2">

    <h2>Room 2</h2>

    <button type="button" data-logic-id="r2.hotspot.left1">Left 1</button>
    <button type="button" data-logic-id="r2.hotspot.left2">Left 2</button>
    <button type="button" data-logic-id="r2.hotspot.center">Center</button>
    <button type="button" data-logic-id="r2.hotspot.right1">Right 1</button>
    <button type="button" data-logic-id="r2.hotspot.right2">Right 2</button>

    <button type="button" data-logic-id="r2.plant.backup">Backup</button>

    <button id="btn-logout-room2" type="button" data-logic-id="btn-logout-room2">Logout</button>
  </div>
</section>

<!-- =========================================================
     MODALS
     ========================================================= -->
<section id="register-screen" class="modal modal-hidden"></section>
<section id="forgot-screen" class="modal modal-hidden"></section>

<section id="legal-screen" class="modal modal-hidden">
  <button id="legal-close" type="button">Close</button>
  <h2 id="legal-title"></h2>
  <div id="legal-body"></div>
</section>

<footer id="eptec-footer">
  <a id="link-imprint" href="#">Imprint</a>
  <a id="link-terms" href="#">Terms</a>
  <a id="link-support" href="#">Support</a>
  <a id="link-privacy-footer" href="#">Privacy</a>
</footer>

</body>
</html>

